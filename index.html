<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTP Login - Budget Access</title>
    <style>
        body { margin: 0; padding: 0; font-family: Arial, sans-serif; overflow: hidden; }
        #otpModal { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.9); 
            z-index: 9999; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        #otpForm { 
            background: white; 
            padding: 30px; 
            border-radius: 8px; 
            text-align: center; 
            min-width: 350px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        h1 { color: #333; margin-bottom: 10px; }
        h2 { color: #666; margin-bottom: 25px; font-size: 18px; }
        input { 
            width: 90%; 
            padding: 12px; 
            margin: 8px 0; 
            border: 2px solid #ddd; 
            border-radius: 5px; 
            font-size: 16px;
        }
        input:focus { border-color: #007bff; outline: none; }
        button { 
            background: #007bff; 
            color: white; 
            padding: 12px 30px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            font-size: 16px;
            margin-top: 15px;
            width: 95%;
        }
        button:hover { background: #0056b3; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        #error { color: #dc3545; margin: 15px 0; font-weight: bold; }
        #success { color: #28a745; margin: 15px 0; font-weight: bold; }
        #budContent { display: none; width: 100%; height: 100vh; border: none; }
        .loading { display: none; margin: 10px 0; }
        .spinner { 
            border: 3px solid #f3f3f3; 
            border-top: 3px solid #007bff; 
            border-radius: 50%; 
            width: 20px; 
            height: 20px; 
            animation: spin 1s linear infinite; 
            display: inline-block;
            margin-right: 10px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="otpModal">
        <div id="otpForm">
            <h1>üîê OTP Login</h1>
            <h2>Enter OTP to Access Budget Dashboard</h2>
            <input type="email" id="emailInput" placeholder="Enter your registered email" required>
            <input type="text" id="otpInput" placeholder="Enter 6-digit OTP" required maxlength="6" pattern="[0-9]{6}">
            <button onclick="verifyOTP()" id="verifyBtn">Verify OTP</button>
            <div class="loading" id="loading">
                <div class="spinner"></div>Verifying...
            </div>
            <div id="error"></div>
            <div id="success"></div>
            <p style="color: #666; font-size: 12px; margin-top: 20px;">
                Contact admin for OTP generation<br>
                OTP expires in 10 minutes
            </p>
        </div>
    </div>
    
    <iframe id="budContent" src="home.html"></iframe>

    <script type="module">
        const _0x3e5fd2=_0x2c0a;(function(_0x2a5198,_0x12b555){const _0x408b80=_0x2c0a,_0x38d88b=_0x2a5198();while(!![]){try{const _0x309c10=parseInt(_0x408b80(0x19e))/0x1*(-parseInt(_0x408b80(0x1b7))/0x2)+parseInt(_0x408b80(0x1a2))/0x3*(-parseInt(_0x408b80(0x1ba))/0x4)+parseInt(_0x408b80(0x1d5))/0x5*(-parseInt(_0x408b80(0x19d))/0x6)+-parseInt(_0x408b80(0x1cd))/0x7+-parseInt(_0x408b80(0x1a0))/0x8*(-parseInt(_0x408b80(0x1a5))/0x9)+parseInt(_0x408b80(0x195))/0xa+parseInt(_0x408b80(0x1ce))/0xb;if(_0x309c10===_0x12b555)break;else _0x38d88b['push'](_0x38d88b['shift']());}catch(_0x4216e0){_0x38d88b['push'](_0x38d88b['shift']());}}}(_0x40a8,0x7c4e6));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js';import{getFirestore,doc,getDoc,deleteDoc,onSnapshot}from'https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js';const firebaseConfig={'apiKey':'AIzaSyDPeNlcSpTe2oOySKcdfh9ykQzHVTDSwzk','authDomain':_0x3e5fd2(0x1cb),'projectId':_0x3e5fd2(0x1b9),'storageBucket':_0x3e5fd2(0x1aa),'messagingSenderId':'1092826485280','appId':_0x3e5fd2(0x1cf)},app=initializeApp(firebaseConfig),db=getFirestore(app);function _0x40a8(){const _0x376fa0=['otpInput','ctrlKey','budContent','disabled','style','none','Invalid\x20OTP\x20or\x20email\x20combination','setItem','6526ILtUPk','otp','otp-gen-4d684','52lzGolI','error','getElementById','Escape','Invalid\x20OTP\x20or\x20email.\x20Please\x20check\x20your\x20credentials.','timestamp','otps','addEventListener','preventDefault','test','verifyOTP','Site\x20URL:\x20https://alessiadeflamme.github.io/Budgie/','data','getItem','toLowerCase','load','OTP\x20verified\x20successfully!\x20Loading\x20dashboard...','otp-gen-4d684.firebaseapp.com','exists','6959141wHVdVB','28278316yXdaiD','1:1092826485280:web:1a2b5b38f002a793246245','Please\x20enter\x20both\x20email\x20and\x20OTP','display','emailInput','otpModal','key','310QwbdNt','replace','beforeunload','Error\x20verifying\x20OTP:','9856000sgNrMo','contextmenu','focus','block','loading','returnValue','keydown','log','73146WUzyyL','116wDcPeA','Connection\x20error.\x20Please\x20check\x20your\x20internet\x20and\x20try\x20again.','32TVjYCU','OTP\x20must\x20be\x20exactly\x206\x20digits','228087wcClZw','textContent','Please\x20enter\x20a\x20valid\x20email\x20address','156807JJSyKg','trim','OTP\x20has\x20expired.\x20Please\x20request\x20a\x20new\x20one.','budgetAccess','input','otp-gen-4d684.firebasestorage.app','success','granted','Enter','value'];_0x40a8=function(){return _0x376fa0;};return _0x40a8();}function showLoading(_0x359e1d){const _0x4df81c=_0x3e5fd2;document[_0x4df81c(0x1bc)](_0x4df81c(0x199))[_0x4df81c(0x1b3)][_0x4df81c(0x1d1)]=_0x359e1d?'block':'none',document[_0x4df81c(0x1bc)]('verifyBtn')[_0x4df81c(0x1b2)]=_0x359e1d;}function showError(_0x4c47c0){const _0x2b4e4f=_0x3e5fd2;document[_0x2b4e4f(0x1bc)](_0x2b4e4f(0x1bb))['textContent']=_0x4c47c0,document[_0x2b4e4f(0x1bc)](_0x2b4e4f(0x1ab))[_0x2b4e4f(0x1a3)]='';}function _0x2c0a(_0x2638c1,_0x560b09){const _0x40a821=_0x40a8();return _0x2c0a=function(_0x2c0a43,_0x59fd57){_0x2c0a43=_0x2c0a43-0x192;let _0x3bed90=_0x40a821[_0x2c0a43];return _0x3bed90;},_0x2c0a(_0x2638c1,_0x560b09);}function showSuccess(_0x386cc0){const _0x5eabaa=_0x3e5fd2;document['getElementById']('success')['textContent']=_0x386cc0,document[_0x5eabaa(0x1bc)](_0x5eabaa(0x1bb))[_0x5eabaa(0x1a3)]='';}function clearMessages(){const _0x42ab59=_0x3e5fd2;document['getElementById'](_0x42ab59(0x1bb))[_0x42ab59(0x1a3)]='',document['getElementById']('success')[_0x42ab59(0x1a3)]='';}window[_0x3e5fd2(0x1c4)]=async function(){const _0x4958bb=_0x3e5fd2,_0x11691d=document[_0x4958bb(0x1bc)](_0x4958bb(0x1d2))[_0x4958bb(0x1ae)][_0x4958bb(0x1a6)]()[_0x4958bb(0x1c8)](),_0x2f4e02=document['getElementById'](_0x4958bb(0x1af))[_0x4958bb(0x1ae)][_0x4958bb(0x1a6)]();clearMessages();if(!_0x11691d||!_0x2f4e02){showError(_0x4958bb(0x1d0));return;}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/[_0x4958bb(0x1c3)](_0x11691d)){showError(_0x4958bb(0x1a4));return;}if(!/^\d{6}$/[_0x4958bb(0x1c3)](_0x2f4e02)){showError(_0x4958bb(0x1a1));return;}showLoading(!![]);try{const _0x31b762=_0x11691d['replace']('@','_')[_0x4958bb(0x192)](/\./g,'_'),_0x474a94=doc(db,_0x4958bb(0x1c0),_0x31b762),_0x67a271=await getDoc(_0x474a94);if(_0x67a271[_0x4958bb(0x1cc)]()){const _0x548c68=_0x67a271[_0x4958bb(0x1c6)](),_0x40f76e=new Date()['getTime'](),_0x30a8b7=_0x548c68[_0x4958bb(0x1bf)],_0x4b40bd=_0x40f76e-_0x30a8b7;if(_0x4b40bd>0x927c0){showError(_0x4958bb(0x1a7)),await deleteDoc(_0x474a94),showLoading(![]);return;}_0x548c68[_0x4958bb(0x1b8)]===_0x2f4e02&&_0x548c68['email'][_0x4958bb(0x1c8)]()===_0x11691d?(showSuccess(_0x4958bb(0x1ca)),setTimeout(async()=>{const _0x193552=_0x4958bb;try{await deleteDoc(_0x474a94),document[_0x193552(0x1bc)]('otpModal')[_0x193552(0x1b3)]['display']=_0x193552(0x1b4),document[_0x193552(0x1bc)](_0x193552(0x1b1))[_0x193552(0x1b3)]['display']=_0x193552(0x198),localStorage[_0x193552(0x1b6)]('budgetAccess','granted');}catch(_0x4832a7){console[_0x193552(0x1bb)]('Error\x20deleting\x20used\x20OTP:',_0x4832a7),document[_0x193552(0x1bc)]('otpModal')[_0x193552(0x1b3)][_0x193552(0x1d1)]='none',document[_0x193552(0x1bc)](_0x193552(0x1b1))[_0x193552(0x1b3)][_0x193552(0x1d1)]=_0x193552(0x198);}},0x5dc)):(showError(_0x4958bb(0x1b5)),showLoading(![]));}else showError(_0x4958bb(0x1be)),showLoading(![]);}catch(_0x20628c){console['error'](_0x4958bb(0x194),_0x20628c),showError(_0x4958bb(0x19f)),showLoading(![]);}},document['addEventListener'](_0x3e5fd2(0x19b),function(_0x3ea17c){const _0x49a850=_0x3e5fd2;if(_0x3ea17c[_0x49a850(0x1d4)]===_0x49a850(0x1bd)||_0x3ea17c['key']==='F5'||_0x3ea17c[_0x49a850(0x1b0)]&&_0x3ea17c[_0x49a850(0x1d4)]==='r')return _0x3ea17c[_0x49a850(0x1c2)](),![];}),document['addEventListener'](_0x3e5fd2(0x196),function(_0xaacf7c){_0xaacf7c['preventDefault']();}),window[_0x3e5fd2(0x1c1)](_0x3e5fd2(0x193),function(_0x1ef9bd){const _0x5a5aab=_0x3e5fd2;if(document[_0x5a5aab(0x1bc)]('otpModal')[_0x5a5aab(0x1b3)][_0x5a5aab(0x1d1)]!==_0x5a5aab(0x1b4))return _0x1ef9bd['preventDefault'](),_0x1ef9bd[_0x5a5aab(0x19a)]='','';}),window[_0x3e5fd2(0x1c1)](_0x3e5fd2(0x1c9),function(){const _0x2a6389=_0x3e5fd2,_0xd71adf=localStorage[_0x2a6389(0x1c7)](_0x2a6389(0x1a8));_0xd71adf===_0x2a6389(0x1ac)&&(document[_0x2a6389(0x1bc)](_0x2a6389(0x1d3))['style']['display']=_0x2a6389(0x1b4),document['getElementById']('budContent')[_0x2a6389(0x1b3)][_0x2a6389(0x1d1)]='block');}),document['getElementById']('emailInput')[_0x3e5fd2(0x197)](),document[_0x3e5fd2(0x1c1)]('keypress',function(_0x15b667){const _0x1a76cd=_0x3e5fd2;_0x15b667[_0x1a76cd(0x1d4)]===_0x1a76cd(0x1ad)&&verifyOTP();}),document[_0x3e5fd2(0x1bc)](_0x3e5fd2(0x1af))[_0x3e5fd2(0x1c1)](_0x3e5fd2(0x1a9),function(_0x846a59){const _0x50212f=_0x3e5fd2;this[_0x50212f(0x1ae)]=this[_0x50212f(0x1ae)][_0x50212f(0x192)](/[^0-9]/g,'');}),document['getElementById'](_0x3e5fd2(0x1d2))[_0x3e5fd2(0x1c1)](_0x3e5fd2(0x1a9),function(_0x358e21){clearMessages();}),console[_0x3e5fd2(0x19c)]('OTP\x20Login\x20System\x20Initialized'),console[_0x3e5fd2(0x19c)](_0x3e5fd2(0x1c5));
    </script>
</body>
</html>
